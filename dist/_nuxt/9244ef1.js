(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{745:function(t,e,n){"use strict";n.r(e);n(10),n(8),n(7),n(13),n(9),n(14);var r=n(3),c=n(74),o=n(639);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={layout:"admin",middleware:["auth"],data:function(){return{imageUrl:"https://app-50cdf7ba-5495-4123-ad16-25cb052ce9fa.cleverapps.io/uploads/",snackbar:{snackbar:!1,text:null,color:"dark"},form:{bankName:null,accountNum:null,accountTitle:null,societyId:null,projectId:null},dialog:!1,viewDialog:!1,editMode:!1}},methods:d(d({},Object(c.b)({getSocieties:"banks/getSocieties",getProjects:"banks/getProjects"})),{},{addBank:function(t){this.form.societyId=t,this.dialog=!0},addBankForProject:function(t){this.form.projectId=t,this.dialog=!0},createBank:function(){var t=this,e=new FormData;e.append("bankName",this.form.bankName),e.append("accountNum",this.form.accountNum),e.append("accountTitle",this.form.accountTitle),this.form.societyId&&(this.editMode?e.append("societyId",this.form.societyId._id):e.append("societyId",this.form.societyId)),this.form.projectId&&(this.editMode?e.append("projectId",this.form.projectId._id):e.append("projectId",this.form.projectId)),this.editMode?(e.append("id",this.form._id),this.$store.dispatch("banks/updateBank",e).then((function(e){e.data.success&&(t.dialog=!1,t.editMode=!1,t.snackbar.snackbar=!0,t.snackbar.text="Bank Updated Successfully",t.snackbar.color="success",t.getSocieties(),t.getProjects())})).catch((function(e){t.snackbar.snackbar=!0,t.snackbar.text=e,t.snackbar.color="red"}))):this.$store.dispatch("banks/addBank",e).then((function(e){e.data.success&&(t.dialog=!1,t.snackbar.snackbar=!0,t.snackbar.text="Bank Added Successfully",t.snackbar.color="success",t.getSocieties(),t.getProjects())})).catch((function(e){t.snackbar.snackbar=!0,t.snackbar.text=e,t.snackbar.color="red"}))},viewBank:function(t){var e=this;this.$store.dispatch("banks/bankById",t).then((function(){e.viewDialog=!0}))},editBank:function(t){var e=this;this.editMode=!0,this.$store.dispatch("banks/getBankForEdit",t).then((function(t){Object.assign(e.form,t)})).then((function(){e.dialog=!0}))},deleteBank:function(t){var e=this;this.$store.dispatch("banks/deleteBank",t).then((function(t){t.data.success&&(e.snackbar.snackbar=!0,e.snackbar.text="Bank Deleted Successfully",e.snackbar.color="error",e.getSocieties(),e.getProjects())}))}}),validations:{form:{bankName:{required:o.required},accountNum:{required:o.required},accountTitle:{required:o.required}}},computed:d(d({},Object(c.c)({societies:"banks/getSocieties",bank:"banks/getBankById",projects:"banks/getProjects"})),{},{isFormValid:function(){return this.$v.form.$invalid},isEditFormValid:function(){return this.$v.editMode.form.$invalid}}),created:function(){this.getSocieties(),this.getProjects()},watch:{dialog:{handler:function(t,e){!1===t&&!0===e&&(this.form.bankName=null,this.form.accountNum=null,this.form.accountTitle=null,this.form.societyId=null,this.form.projectId=null,this.editMode=!1,this.$refs.form.reset())},deep:!0}}},k=n(55),f=n(97),m=n.n(f),_=n(229),h=n(716),x=n(606),y=n(583),B=n(737),j=n(601),w=n(685),C=n(659),I=n(717),D=n(128),N=n(739),S=n(648),V=n(650),O=n(598),A=n(651),component=Object(k.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pa-5"},[n("v-row",{attrs:{justify:"center"}}),t._v(" "),n("v-flex",{staticClass:"text-caption text-center text-uppercase text-no-wrap primary",attrs:{"mt-3":""}},[n("h2",{staticClass:"pa-1 white--text"},[t._v("Societies")])]),t._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("\n          "+t._s(t.editMode?"Edit Bank Account Details":"Add Bank Account For Specific Society")+"\n        ")])]),t._v(" "),n("v-form",{ref:"form",attrs:{"lazy-validation":""}},[n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{attrs:{rules:[function(){return t.$v.form.bankName.required||"Bank Name is required"}],label:"Bank Name",required:""},model:{value:t.form.bankName,callback:function(e){t.$set(t.form,"bankName",e)},expression:"form.bankName"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{attrs:{rules:[function(){return t.$v.form.accountNum.required||"Account Number is required"}],label:"Bank Account Number",required:""},model:{value:t.form.accountNum,callback:function(e){t.$set(t.form,"accountNum",e)},expression:"form.accountNum"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{attrs:{rules:[function(){return t.$v.form.accountTitle.required||"Account Title is required"}],label:"Bank Account Title",required:""},model:{value:t.form.accountTitle,callback:function(e){t.$set(t.form,"accountTitle",e)},expression:"form.accountTitle"}})],1)],1)],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n            Close\n          ")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",disabled:t.isFormValid,text:""},on:{click:function(e){return e.preventDefault(),t.createBank.apply(null,arguments)}}},[t._v("\n            Save\n          ")])],1)],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:t.viewDialog,callback:function(e){t.viewDialog=e},expression:"viewDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Add Bank Account For Specific Society")])]),t._v(" "),n("v-form",{ref:"form",attrs:{"lazy-validation":""}},[n("v-card-text",[n("v-simple-table",{staticClass:"mt-5",scopedSlots:t._u([{key:"default",fn:function(){return[t.bank?n("tbody",[n("tr",[n("td",{staticClass:"\n                      font-weight-bold\n                      text-left text-uppercase\n                      primary--text\n                    "},[t._v("\n                    Bank Name\n                  ")]),t._v(" "),n("td",[t._v(t._s(t.bank.bankName))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold text-uppercase primary--text"},[t._v("\n                    Bank Account Number\n                  ")]),t._v(" "),n("td",[t._v(t._s(t.bank.accountNum))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold text-uppercase primary--text"},[t._v("\n                    Bank Account Title\n                  ")]),t._v(" "),n("td",[t._v(t._s(t.bank.accountTitle))])]),t._v(" "),t.bank.societyId?n("tr",[n("td",{staticClass:"font-weight-bold text-uppercase primary--text"},[t._v("\n                    Society Name\n                  ")]),t._v(" "),n("td",[t._v(t._s(t.bank.societyId.society_name))])]):t._e(),t._v(" "),t.bank.projectId?n("tr",[n("td",{staticClass:"font-weight-bold text-uppercase primary--text"},[t._v("\n                    Project Name\n                  ")]),t._v(" "),n("td",[t._v(t._s(t.bank.projectId.projectName))])]):t._e()]):t._e()]},proxy:!0}])})],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.viewDialog=!1}}},[t._v("\n            Close\n          ")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",disabled:t.isFormValid,text:""},on:{click:function(e){return e.preventDefault(),t.createBank.apply(null,arguments)}}},[t._v("\n            Save\n          ")])],1)],1)],1)],1),t._v(" "),n("v-simple-table",{staticClass:"mt-8",scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("Society Name")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("Bank Details Status")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("View Bank Details")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("Add Bank")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("Actions")])])]),t._v(" "),t.societies?n("tbody",t._l(t.societies,(function(e){return n("tr",{key:e._id},[n("td",[t._v(t._s(e.society_name))]),t._v(" "),n("td",[e.bankId?n("v-chip",{staticClass:"ma-2",attrs:{color:"green",dark:""}},[t._v("\n              Bank Details Added\n            ")]):n("v-chip",{staticClass:"ma-2",attrs:{color:"red",dark:""}},[t._v("\n              No Bank Details Found\n            ")])],1),t._v(" "),n("td",[n("v-btn",{staticClass:"white--text",attrs:{color:"green",disabled:!e.bankId},on:{click:function(n){return n.preventDefault(),t.viewBank(e.bankId._id)}}},[t._v("View\n              "),n("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-archive-eye-outline ")])],1)],1),t._v(" "),n("td",[n("v-btn",{attrs:{color:"primary",disabled:!!e.bankId},on:{click:function(n){return n.preventDefault(),t.addBank(e._id)}}},[t._v("Add Bank Details "),n("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-bank ")])],1)],1),t._v(" "),n("td",[n("v-icon",{attrs:{disabled:!e.bankId,color:"error"},on:{click:function(n){return n.preventDefault(),t.deleteBank(e.bankId._id)}}},[t._v("\n              mdi-delete\n            ")]),t._v(" "),n("v-icon",{attrs:{disabled:!e.bankId,color:"primary"},on:{click:function(n){return n.preventDefault(),t.editBank(e.bankId._id)}}},[t._v("\n              mdi-pencil\n            ")])],1)])})),0):t._e()]},proxy:!0}])}),t._v(" "),n("v-flex",{staticClass:"text-caption text-center text-uppercase text-no-wrap primary",attrs:{"mt-12":""}},[n("h2",{staticClass:"pa-1 white--text"},[t._v("Projects")])]),t._v(" "),n("v-simple-table",{staticClass:"mt-6",scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("Project Name")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("Bank Details Status")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("View Bank Details")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("Add Bank")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("Actions")])])]),t._v(" "),t.projects?n("tbody",t._l(t.projects,(function(e){return n("tr",{key:e._id},[n("td",[t._v(t._s(e.projectName))]),t._v(" "),n("td",[e.bankId?n("v-chip",{staticClass:"ma-2",attrs:{color:"green",dark:""}},[t._v("\n              Bank Details Added\n            ")]):n("v-chip",{staticClass:"ma-2",attrs:{color:"red",dark:""}},[t._v("\n              No Bank Details Found\n            ")])],1),t._v(" "),n("td",[n("v-btn",{staticClass:"white--text",attrs:{color:"green",disabled:!e.bankId},on:{click:function(n){return n.preventDefault(),t.viewBank(e.bankId._id)}}},[t._v("View\n              "),n("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-archive-eye-outline ")])],1)],1),t._v(" "),n("td",[n("v-btn",{attrs:{color:"primary",disabled:!!e.bankId},on:{click:function(n){return n.preventDefault(),t.addBankForProject(e._id)}}},[t._v("Add Bank Details "),n("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-bank ")])],1)],1),t._v(" "),n("td",[n("v-icon",{attrs:{disabled:!e.bankId,color:"error"},on:{click:function(n){return n.preventDefault(),t.deleteBank(e.bankId._id)}}},[t._v("\n              mdi-delete\n            ")]),t._v(" "),n("v-icon",{attrs:{disabled:!e.bankId,color:"primary"},on:{click:function(n){return n.preventDefault(),t.editBank(e.bankId._id)}}},[t._v("\n              mdi-pencil\n            ")])],1)])})),0):t._e()]},proxy:!0}])}),t._v(" "),n("v-snackbar",{attrs:{rounded:"pill"},scopedSlots:t._u([{key:"action",fn:function(e){var r=e.attrs;return[n("v-btn",t._b({attrs:{color:t.snackbar.color,text:""},on:{click:function(e){t.snackbar.snackbar=!1}}},"v-btn",r,!1),[t._v("\n        Close\n      ")])]}}]),model:{value:t.snackbar.snackbar,callback:function(e){t.$set(t.snackbar,"snackbar",e)},expression:"snackbar.snackbar"}},[t._v("\n    "+t._s(t.snackbar.text)+"\n\n    ")])],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{VBtn:_.a,VCard:h.a,VCardActions:x.a,VCardText:x.b,VCardTitle:x.c,VChip:y.a,VCol:B.a,VContainer:j.a,VDialog:w.a,VFlex:C.a,VForm:I.a,VIcon:D.a,VRow:N.a,VSimpleTable:S.a,VSnackbar:V.a,VSpacer:O.a,VTextField:A.a})}}]);